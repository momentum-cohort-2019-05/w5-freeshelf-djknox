{% extends "base.html" %}

{% block content %}
  <h1>Books</h1>
  <ul>
    <li><a href="{% url 'books' %}?order_by=title">order books A-Z by title</a></li>
    <li><a href="{% url 'books' %}?order_by=-title">order books Z-A by title</a></li>
    <li><a href="{% url 'books' %}?order_by=created_date">order books by date added (oldest to most recent)</a></li>
    <li><a href="{% url 'books' %}?order_by=-created_date">order books by date added (most recent to oldest)</a></li>
  </ul>
  {% if book_list %}
  <ul>
    {% for book in book_list %}
      <li>
        <a href="{{ book.get_absolute_url }}">{{ book.title }}</a> by {{book.author}}

        {% if request.user.is_authenticated and request.user not in book.favorites.all %}
        <a href="{% url 'favorite-book' book.pk %}?next={{ request.path }}">favorite</a>
        {% elif request.user.is_authenticated and request.user in book.favorites.all %}
        <a href="{% url 'favorite-book' book.pk %}?next={{ request.path }}">unfavorite</a>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
  {% else %}
    <p>There are no books in the library.</p>
  {% endif %}       
{% endblock %}